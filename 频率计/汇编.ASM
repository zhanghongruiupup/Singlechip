ORG 0000H
LJMP MAIN
ORG 000BH
LJMP T00
MAIN:
      JNB P3.7,NEXT
	  LJMP MAIN
NEXT: LCALL DELAY
PD:   JB P3.7,START
	  LJMP PD

START:MOV TMOD,#01100001B
	 MOV TH1,#0
	 MOV TL1,#0
	 MOV R7,#20
     MOV TH0,#3CH
	 MOV TL0,#0B0H
	 SETB TR0
	 SETB TR1
	 SETB ET0
	 SETB EA
	 SJMP $
T00: MOV TH0,#3CH
	 MOV TL0,#0B0H
	 DJNZ R7,EN
	 MOV R2,TL1
	 MOV R3,TH1
	 MOV A,R2
	 ORL A,R3
	 MOV R4,A
HL:  MOV A,R4
	 MOV P0,#11111101B
	 MOV B,#100
	 DIV AB
	 LCALL XH
	 LCALL DELAY1
     MOV P0,#11111011B
	 MOV A,B
	 MOV B,#10
	 DIV AB
	 LCALL XH
	 LCALL DELAY1
	 MOV P0,#11110111B
	 MOV A,B
	 LCALL XH
	 LCALL DELAY1
	 SJMP HL




	 XH:   MOV DPTR,#TAB
	 MOVC A,@A+DPTR
	 MOV P2,A	 
	 RET
TAB: DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH
DELAY:MOV R5,#20
     D1:MOV R6,#248
	 D2:MOV R7,#10
	 DJNZ R7,$
	 DJNZ R6,D2
	 DJNZ R5,D1
	 RET
DELAY1:MOV R5,#20
     D4: MOV R6,#1			
	 D3: MOV R7,#248
	  DJNZ R7,$
	  DJNZ R6,D3
	  DJNZ R5,D4
	  RET
EN:RETI
END
